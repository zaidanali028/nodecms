<%-include('../layouts/admin_header.ejs')%>
<h1>All Posts</h1>
<%-include('../layouts/flashes.ejs')%>


<table class="table table-bordered">
<thead>
  <tr>
  <th>Id</th>
  <th>Title</th>
  <th>Post's Picture</th>
  <th>Category</th>
 <th>Status</th>
  <th>Allow Comments</th>
  <th>Date</th>

</tr>
</thead>
<tbody>

<% allPosts.forEach(function(post){ %>

  <tr>
     <td><%=post._id%></td>
     <td><%=post.title%></td>
     <td>
         <% if (post.uploader){ %>
         <img src="/uploads/<%=post.uploader%>" width="60px" height="60px" alt="">

        <% } else { %>
             No Image
       <% } %>



     </td>
     <td><%=post.category.name%></td>
     <td><%=post.status%></td>
  
     <td><%=post.allowComments%></td>
     <td><%=post.date.toDateString() %></td>

     <td> <a class="btn btn-outline-primary" href="/admin/posts/edit/<%=post._id%>">Edit Post </a></td>
     <td> 
       <form action="/admin/posts/delete/<%=post._id%>?_method=DELETE" method="POST">
      <button type="submit" onclick="return confirm('Are you sure you want to delete this post ?')" class="btn btn-outline-danger">Delete Post</button>
      </form>
     </td>

  </tr>

<% }) %>

</tbody>
</table>


<table>
  <tbody>
    <tr>
      <td>
<form action="/admin/posts/clear?_method=DELETE" method="POST">
  <button type="submit" class="btn btn-outline-danger" onclick="return confirm('Are You Sure You Want To Delete All Posts?')">
    Delete All Posts
  </button>
</form>
</td>
<td>
<button class="btn btn-outline-success " onclick="window.print()">
  Print All Posts
</button>
</td>
</tr>
</tbody>
</table>


<%-include('../layouts/admin_footer.ejs')%>
